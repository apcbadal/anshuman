<html>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <body>
    <div>
      <center>
        <h2>My Personal file</h2>
        <div>
          <span id="Files"></span>
        </div>
      </center>
    </div>

    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-storage.js"></script>

    <script src="init-firebase.js"></script>

    <script>
      var storageRef = firebase.storage().ref();

      window.onload = function () {
        var listRef = storageRef.child("images");
        var i = 0;

        listRef
          .listAll()
          .then(function (res) {
            res.items.forEach(function (itemRef) {
              i++;
              displayImage(i, itemRef);
            });
          })
          .catch(function (error) {});
        function displayImage(row, images) {
          console.log(images.name);
          images.getDownloadURL().then(function (url) {
            console.log(images);
            console.log(url);
            let new_html = "";
            new_html +=
              '<a href="' + url + '">' + images.name + "</br><p>" + "</a>";
            $("#Files").append(new_html);
          });
        }
      };
    </script>
  </body>
</html>
